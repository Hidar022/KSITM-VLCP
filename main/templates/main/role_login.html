{% extends 'main/base.html' %}
{% load static %}
{% load widget_tweaks %}

{% with hide_footer=True %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/auth.css' %}">
{% endblock %}

{% block page_wrapper %}

<div class="auth-container">

    <div class="floating-shape shape1"></div>
    <div class="floating-shape shape2"></div>

    <div class="auth-box" data-aos="zoom-in">
        <div class="logo-circle">
            <img src="{% static 'images/ksitm_logo.png' %}" alt="KSITM Logo">
        </div>

        <h3 class="text-white mb-4">Login</h3>

        <div class="role-tab-container">
            <div id="tab-student" class="role-tab active-role" onclick="switchRole('student')">Student</div>
            <div id="tab-lecturer" class="role-tab" onclick="switchRole('lecturer')">Lecturer</div>
            <div id="tab-admin" class="role-tab" onclick="switchRole('admin')">Admin</div>
        </div>

        <form method="POST">
            {% csrf_token %}
            <input type="hidden" name="role" id="roleInput" value="student">

            <label>Username</label>
            {{ form.username|add_class:"form-control" }}

            <label>Password</label>
            {{ form.password|add_class:"form-control" }}

            <div id="lecturer-id-box">
                <label>Lecturer ID</label>
                {{ form.lecturer_id|add_class:"form-control" }}
            </div>

            <button type="submit" class="submit-btn">Login</button>
        </form>

        <p id="registerBox" class="text-link">
            Don't have an account? <a href="{% url 'register' %}">Register</a>
        </p>
    </div>
</div>

<script>
    function switchRole(role) {
        document.getElementById("roleInput").value = role;

        document.querySelectorAll(".role-tab")
            .forEach(t => t.classList.remove("active-role"));

        document.getElementById("tab-" + role)
            .classList.add("active-role");

        document.getElementById("lecturer-id-box").style.display =
            role === "lecturer" ? "block" : "none";

        document.getElementById("registerBox").style.display =
            role === "student" ? "block" : "none";
    }

    window.onload = () => switchRole("student");
</script>

{% endblock %}
{% endwith %}
